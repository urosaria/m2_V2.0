<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>M2</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0" />
    <meta name="format-detection" content="telephone=no, address=no, email=no" />
    <meta name="apple-mobile-web-app-title" content="M2" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <script src="/css/bootstrap/vendor/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.js"></script>
</head>

<body class="bgDef">

<div class="wrap hasHeader hasCalProcess hasFooter">

    <div id="header">
        <div class="_l">
            <div class="headerIcon"><img src="/images/m2/common/logoS.png" alt="M2" class="logo" /></div>
            <h1 class="headerTitle">자동물량산출 산출결과</h1>
            <button class="headerFunction">?</button>
        </div>
    </div>
    <div id="content" class="cal">
        <div class="contentArea">
            <div class="formArea">
                {{#structureDetailForm}}
                <table>
                    <thead>
                        <tr>
                            <th>품명</th>
                            <th>규격</th>
                            <th>단위</th>
                            <th>면적</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th>외벽판넬</th>
                            <td>{{outsideWallType}} / {{outsideWallPaper}} / {{outsideWallThick}}</td>
                            <td>m2</td>
                            <td id="outsideWall"></td>
                        </tr>
                        <tr>
                            <th>내벽판넬</th>
                            <td>{{insideWallType}} / {{insideWallPaper}} / {{insideWallThick}}</td>
                            <td>m2</td>
                            <td id="insideWall"></td>
                        </tr>
                        <tr>
                            <th>천장판넬</th>
                            <td>{{ceilingType}} / {{ceilingPaper}} / {{ceilingThick}}</td>
                            <td>m2</td>
                            <td id="ceilingWall"></td>
                        </tr>
                        <tr>
                            <th>지붕판넬</th>
                            <td>{{roofType}} / {{roofPaper}} / {{roofThick}} </td>
                            <td>m2</td>
                            <td id="roofWall"></td>
                        </tr>
                        <tr>
                            <th>캐노피</th>
                            <td></td>
                            <td></td>
                            <td id=""></td>
                        </tr>
                        <tr>
                            <th>기타-부재료</th>
                            <td></td>
                            <td></td>
                            <td id=""></td>
                        </tr>
                        <tr>
                            <th>기타-운반비</th>
                            <td></td>
                            <td></td>
                            <td id=""></td>
                        </tr>
                        <tr>
                            <th>기타-장비비</th>
                            <td></td>
                            <td></td>
                            <td id=""></td>
                        </tr>
                        <tr>
                            <th>기타-폐기물처리비</th>
                            <td></td>
                            <td></td>
                            <td id=""></td>
                        </tr>
                    </tbody>
                </table>
                {{/structureDetailForm}}
            </div>
        </div>
    </div>
    <div id="nav">
        <div class="_l">
            <ul>
                <li><a href="#" class="on"><img src="/images/m2/nav/n01.png" alt="cal" /></a></li>
                <li><a href="#"><img src="/images/m2/nav/n02.png" alt="3d" /></a></li>
                <li><a href="#"><img src="/images/m2/nav/n03.png" alt="bbs" /></a></li>
                <li><a href="#"><img src="/images/m2/nav/n04.png" alt="member" /></a></li>
            </ul>
        </div>
    </div>
    <div id="button">
        <div class="_l">
            <ul class="_c2">
                <li><a href="#" class="prev">이전</a></li>
                <li><a href="#" class="next on">저장</a></li>
            </ul>
        </div>
    </div>

</div>

<script type="text/javascript">
    $(document).ready(function(){
        var width = '{{structureDetailForm.structure.width}}';
        var height = '{{structureDetailForm.structure.height}}';
        var length = '{{structureDetailForm.structure.length}}';
        var lengthCeil = Math.ceil(length/1000)*1000;
        var heightCeil = Math.ceil(height/1000)*1000;
        var trussHeight = '{{structureDetailForm.structure.trussHeight}}';

        //외벽 판넬 계산
        var _a = width*heightCeil*2;
        var _c = length*heightCeil*2;
        var _b =0;

        var _m =1000 - (height%1000);
        var _l = Math.ceil((trussHeight-_m)/1000);
        var _r=0;
        var stm = trussHeight-_m;
        for(var i=0; i<_l; i++){
            _r += Math.ceil(((stm-(i*1000))*width/2)/trussHeight);
        }
        _b = _r*4*1000;

        console.log('=================외벽판넬 계산');
        console.log('_a:'+_a);
        console.log('_b:'+_b);
        console.log('_c:'+_c);
        console.log('result1:'+ parseInt(_a+_b+_c));
        $("#outsideWall").text(parseInt(_a+_b+_c));
        console.log('=================외벽판넬 계산');

        //내벽판넬
        var insideWall=0;
        {{#each structureDetailForm.insideWallList}}
        insideWall+={{length}}*{{height}}*{{amount}};
        {{/each}}
        console.log('=================내벽판넬 계산');
        console.log('insideWall:'+insideWall);
        $("#insideWall").text(insideWall);
        console.log('=================내벽판넬 계산');

        //천장판넬
        var ceilingWall=0;
        {{#each structureDetailForm.ceilingList}}
            ceilingWall+={{length}}*{{height}}*{{amount}};
        {{/each}}
        console.log('=================천장판넬 계산');
        console.log('ceilingWall:'+ceilingWall);
        $("#ceilingWall").text(ceilingWall);
        console.log('=================천장판넬 계산');

        //지붕판넬

        var trussHeightPow ;
        //제곱
        var test = Math.pow(trussHeight,2);
        var test2 = Math.pow(width/2,2);
        //제곱근
        var test3 = parseInt(test+test2);
        var test4 = Math.sqrt(test3);
        var test5= '{{structureDetailForm.roofThick}}';

        console.log('test:'+test);
        console.log('test2:'+test2);
        console.log('test3:'+test3);
        console.log('test4:'+test4);
        console.log('test5:'+test5);

        var ccresult = (lengthCeil*test4+test5+150)*2;
        console.log('=================지붕판넬 계산');
        console.log('ccresult:'+ccresult);
        $("#roofWall").text(ccresult);
        console.log('=================지붕판넬 계산');

    });

</script>

</body>
</html>

