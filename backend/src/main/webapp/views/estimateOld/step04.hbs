<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>M2 CALCULUS TEST</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0" />
    <meta name="format-detection" content="telephone=no, address=no, email=no" />
    <meta name="apple-mobile-web-app-title" content="M2" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <script type="text/javascript" src="/js/m2/include.js"></script>
    <script src="/css/bootstrap/vendor/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.js"></script>
</head>

<body class="bgDef">

<div class="wrap hasHeader hasCalProcess hasFooter">

    {{> common/header}}

    <div class="calProcess">
        <div class="_l">
            <ul>
                <li class="complete"><a href="#" data-url="/estimate/step01?id={{structureDetailForm.structure.id}}">건물정보</a></li>
                <li class="complete"><a href="#" data-url="/estimate/step02?structure_detail_id={{structureDetailForm.id}}">세부정보</a></li>
                <li class="complete"><a href="#" data-url="/estimate/step03?structure_detail_id={{structureDetailForm.id}}">규격정보</a></li>
                <li class="on"><a href="#">자재선택</a></li>
            </ul>
        </div>
    </div>
    <div id="content" class="cal">
        <div class="contentArea">
            <div class="formArea">
                <form name="structureDetailForm" id="structureForm" method="post" action="/estimate/step04">
                {{#structureDetailForm}}
                <input type="text" name="id" value="{{id}}" />
                <input type="text" id="returnUrl" name="returnUrl" value="" />

                <div class="_l">
                    <div class="formsGroup noHP">
                        <div class="meterial">
                            <div class="meterialGroup">
                                {{#equals 'Y' insideWallYn}}
                                <div class="article">
                                    <div class="forms hasFormsTitle hasP">
                                        <div class="formsTitle">내벽</div>
                                        <div class="form w40">
                                            <select class="parentType focusAct" name="insideWallType" data-child="insideWallPaper">
                                                <option value="">보드종류</option>
                                                <option value="E" {{#equals 'E' insideWallType}}selected="selected"{{/equals}} >EPS</option>
                                                <option value="G" {{#equals 'G' insideWallType}}selected="selected"{{/equals}}>그라스울</option>
                                                <option value="W" {{#equals 'W' insideWallType}}selected="selected"{{/equals}}>우레탄</option>
                                            </select>
                                        </div>
                                        <div class="form w30">
                                            <select class="focusAct" name="insideWallPaper" id="insideWallPaper" data-value="{{insideWallPaper}}">
                                                <option value="">검사서</option>
                                                <option value="E1">비난연</option><!-- EPS 옵션 1 -->
                                                <option value="E2">난연</option><!-- EPS 옵션 2 -->
                                                <option value="E3">가등급</option><!-- EPS 옵션 3 -->
                                                <option value="G1">48K</option><!-- 그라스울 옵션 1 -->
                                                <option value="G2">64K</option><!-- 그라스울 옵션 2 -->
                                                <option value="W1">난연</option><!-- 우레탄은 난연 자동 선택(옵션 하나) -->
                                            </select>
                                        </div>
                                        <div class="form w30">
                                            <select class="focusAct" name="insideWallThick">
                                                <option value="0">두께</option>
                                                <option value="50" {{#equals 50 insideWallThick}}selected="selected"{{/equals}}>50</option>
                                                <option value="75" {{#equals 75 insideWallThick}}selected="selected"{{/equals}}>75</option>
                                                <option value="100" {{#equals 100 insideWallThick}}selected="selected"{{/equals}}>100</option>
                                                <option value="125" {{#equals 125 insideWallThick}}selected="selected"{{/equals}}>125</option>
                                                <option value="150" {{#equals 150 insideWallThick}}selected="selected"{{/equals}}>150</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                {{/equals}}

                                <div class="article">
                                    <div class="forms hasFormsTitle hasP">
                                        <div class="formsTitle">외벽</div>
                                        <div class="form w40">
                                            <select class="parentType focusAct" name="outsideWallType" data-child="outsideWallPaper">
                                                <option value="">보드종류</option>
                                                <option value="E" {{#equals 'E' outsideWallType}}selected="selected"{{/equals}} >EPS</option>
                                                <option value="G" {{#equals 'G' outsideWallType}}selected="selected"{{/equals}}>그라스울</option>
                                                <option value="W" {{#equals 'W' outsideWallType}}selected="selected"{{/equals}}>우레탄</option>
                                            </select>
                                        </div>
                                        <div class="form w30">
                                            <select class="childType focusAct" name="outsideWallPaper" id="outsideWallPaper" data-value="{{outsideWallPaper}}">
                                                <option value="">검사서</option>
                                                <option value="E1">비난연</option><!-- EPS 옵션 1 -->
                                                <option value="E2">난연</option><!-- EPS 옵션 2 -->
                                                <option value="E3">가등급</option><!-- EPS 옵션 3 -->
                                                <option value="G1">48K</option><!-- 그라스울 옵션 1 -->
                                                <option value="G2">64K</option><!-- 그라스울 옵션 2 -->
                                                <option value="W1">난연</option><!-- 우레탄은 난연 자동 선택(옵션 하나) -->
                                            </select>
                                        </div>
                                        <div class="form w30">
                                            <select class="focusAct" name="outsideWallThick">
                                                <option value="0">두께</option>
                                                <option value="50" {{#equals 50 outsideWallThick}}selected="selected"{{/equals}}>50</option>
                                                <option value="75" {{#equals 75 outsideWallThick}}selected="selected"{{/equals}}>75</option>
                                                <option value="100" {{#equals 100 outsideWallThick}}selected="selected"{{/equals}}>100</option>
                                                <option value="125" {{#equals 125 outsideWallThick}}selected="selected"{{/equals}}>125</option>
                                                <option value="150" {{#equals 150 outsideWallThick}}selected="selected"{{/equals}}>50</option>
                                                <option value="175" {{#equals 175 outsideWallThick}}selected="selected"{{/equals}}>175</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="article">
                                    <div class="forms hasFormsTitle hasP">
                                        <div class="formsTitle">지붕</div>
                                        <div class="form w40">
                                            <select class="parentType focusAct" name="roofType" data-child="roofPaper">
                                                <option value="">보드종류</option>
                                                <option value="E" {{#equals 'E' roofType}}selected="selected"{{/equals}} >EPS</option>
                                                <option value="G" {{#equals 'G' roofType}}selected="selected"{{/equals}}>그라스울</option>
                                                <option value="W" {{#equals 'W' roofType}}selected="selected"{{/equals}}>우레탄</option>
                                            </select>
                                        </div>
                                        <div class="form w30">
                                            <select class="focusAct" name="roofPaper" id="roofPaper" data-value="{{roofPaper}}">
                                                <option value="">검사서</option>
                                                <option value="E1">비난연</option><!-- EPS 옵션 1 -->
                                                <option value="E2">난연</option><!-- EPS 옵션 2 -->
                                                <option value="E3">가등급</option><!-- EPS 옵션 3 -->
                                                <option value="G1">48K</option><!-- 그라스울 옵션 1 -->
                                                <option value="G2">64K</option><!-- 그라스울 옵션 2 -->
                                                <option value="W1">난연</option><!-- 우레탄은 난연 자동 선택(옵션 하나) -->
                                            </select>
                                        </div>
                                        <div class="form w30">
                                            <select class="focusAct" name="roofThick">
                                                <option value="0">두께</option>
                                                <option value="50" {{#equals 50 roofThick}}selected="selected"{{/equals}}>50</option>
                                                <option value="75" {{#equals 75 roofThick}}selected="selected"{{/equals}}>75</option>
                                                <option value="100" {{#equals 100 roofThick}}selected="selected"{{/equals}}>100</option>
                                                <option value="125" {{#equals 125 roofThick}}selected="selected"{{/equals}}>125</option>
                                                <option value="150" {{#equals 150 roofThick}}selected="selected"{{/equals}}>150</option>
                                                <option value="175" {{#equals 175 roofThick}}selected="selected"{{/equals}}>175</option>
                                                <option value="200" {{#equals 200 roofThick}}selected="selected"{{/equals}}>200</option>
                                                <option value="225" {{#equals 225 roofThick}}selected="selected"{{/equals}}>225</option>
                                                <option value="260" {{#equals 260 roofThick}}selected="selected"{{/equals}}>260</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            {{#equals 'Y' ceilingYn}}
                            <div class="article">
                                    <div class="forms hasFormsTitle hasP">
                                        <div class="formsTitle">천장</div>
                                        <div class="form w40">
                                            <select class="parentType focusAct" name="ceilingType" data-child="ceilingPaper">
                                                <option value="">보드종류</option>
                                                <option value="E" {{#equals 'E' ceilingType}}selected="selected"{{/equals}} >EPS</option>
                                                <option value="G" {{#equals 'G' ceilingType}}selected="selected"{{/equals}}>그라스울</option>
                                                <option value="W" {{#equals 'W' ceilingType}}selected="selected"{{/equals}}>우레탄</option>
                                            </select>
                                        </div>
                                        <div class="form w30">
                                            <select class="childType focusAct" name="ceilingPaper" id="ceilingPaper" data-value="{{ceilingPaper}}">
                                                <option value="">검사서</option>
                                                <option value="E1">비난연</option><!-- EPS 옵션 1 -->
                                                <option value="E2">난연</option><!-- EPS 옵션 2 -->
                                                <option value="E3">가등급</option><!-- EPS 옵션 3 -->
                                                <option value="G1">48K</option><!-- 그라스울 옵션 1 -->
                                                <option value="G2">64K</option><!-- 그라스울 옵션 2 -->
                                                <option value="W1">난연</option><!-- 우레탄은 난연 자동 선택(옵션 하나) -->
                                            </select>
                                        </div>
                                        <div class="form w30">
                                            <select class="focusAct" name="ceilingThick">
                                                <option value="0">두께</option>
                                                <option value="50" {{#equals 50 ceilingThick}}selected="selected"{{/equals}}>50</option>
                                                <option value="75" {{#equals 75 ceilingThick}}selected="selected"{{/equals}}>75</option>
                                                <option value="100" {{#equals 100 ceilingThick}}selected="selected"{{/equals}}>100</option>
                                                <option value="125" {{#equals 125 ceilingThick}}selected="selected"{{/equals}}>125</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            {{/equals}}
                            </div>
                        </div>
                    </div>
                </div>
                {{/structureDetailForm}}
                </form>
            </div>
        </div>
    </div>
    <div id="nav">
        <div class="_l">
            <ul>
                <li><a href="#" class="on"><img src="/images/m2/nav/n01.png" alt="cal" /></a></li>
                <li><a href="#"><img src="/images/m2/nav/n02.png" alt="3d" /></a></li>
                <li><a href="#"><img src="/images/m2/nav/n03.png" alt="bbs" /></a></li>
                <li><a href="#"><img src="/images/m2/nav/n04.png" alt="member" /></a></li>
            </ul>
        </div>
    </div>
    <div id="button">
        <div class="_l">
            <ul class="_c2">
                <li><a href="#" class="prev" data-url="/estimate/step03?structure_detail_id={{structureDetailForm.id}}">이전</a></li>
                <li><a href="#" class="next on">저장</a></li>
            </ul>
        </div>
    </div>

</div>

<script type="text/javascript">
$(document).ready(function(){

    var childEType = {
        "E1": '비난연',
        "E2": '난연',
        "E3": '가등급'
    };

    var childGType = {
        "G1": '48K',
        "G2": '64K'
    };

    var childWType = {
        "W1": '난연'
    };

    $(".parentType" ).each(function() {
        var childId = $(this).attr('data-child');
        var typeValue = $(this).val();

        if(typeValue!=''){
            $("#"+childId).children('option').remove();
            $.each( eval('child'+typeValue+'Type') , function( key, value ) {
                $("#"+childId).append('<option value="'+key+'">'+value+'</option>');
                var childValue= $("#"+childId).attr('data-value');

                if(childValue!=''){
                    $("#"+childId).val(childValue).prop("selected", true);
                }
            });
        }
    });

    $(".next").click(function() {
        $( "#structureForm" ).submit();
    });

    $(".parentType").change(function() {
      var typeValue = $(this).val();
      var childId = $(this).attr('data-child');

      if(typeValue==''){
        alert('보드종류를 선택하세요.');
        return false;
      }else {
        $("#"+childId).children('option').remove();
        $.each( eval('child'+typeValue+'Type') , function( key, value ) {
            $("#"+childId).append('<option value="'+key+'">'+value+'</option>');
        });
      }
    });

});

</script>

</body>
</html>

